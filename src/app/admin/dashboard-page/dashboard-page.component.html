<div class="grid">
  <div
    class="col-10 col-offset-1"
    *ngIf="product$ | async as products; else loading"
  >
    <p-table [value]="product$ | async">
      <ng-template pTemplate="header">
        <tr>
          <th>Изображение</th>
          <th>Название</th>
          <th>Цена</th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-products>
        <tr>
          <td>
            <img
              src="{{url}}/{{ products.img }}"
              alt="device"
              style="width: 50px"
            />
          </td>
          <td>{{ products.name }}</td>
          <td>{{ products.price }}руб</td>
          <td style="text-align: center">
            <div>
              <button
                pButton
                pRipple
                style="margin-right: 10px"
                type="button"
                class="p-button-warning"
                (click)="delete(products.id)"
              >
                Изменить
              </button>

              <button
                pButton
                pRipple
                type="button"
                class="p-button-danger"
                (click)="delete(products.id)"
              >
                Удалить
              </button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <p-paginator
    [rows]="8"
    [totalRecords]="count"
    (onPageChange)="onPageChange($event)"
    class="col-10 col-offset-1"
  ></p-paginator>

  <ng-template #loading>
    <div class="col-10 col-offset-1" style="text-align: center">
      <p-progressSpinner
        [style]="{ width: '100px', height: '100px', margin: 'auto auto' }"
        styleClass="custom-spinner"
        strokeWidth="8"
        fill="var(--surface-ground)"
        animationDuration=".5s"
      ></p-progressSpinner>
    </div>
  </ng-template>
</div>
